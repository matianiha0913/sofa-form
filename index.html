<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ø³ÛŒØ³ØªÙ… Ù…Ø¯ÛŒØ±ÛŒØª Ø³ÙØ§Ø±Ø´ Ù…Ø¨Ù„ Ùˆ ØµÙ†Ø¯Ù„ÛŒ</title>
<style>
@font-face {
  font-family: 'IranSans';
  src: local('IranSans'), url('fonts/IRANSans.ttf') format('truetype');
}

body {
  font-family: 'IranSans', Tahoma, sans-serif;
  background-color: #ffffff;
  color: #000000;
  margin: 0;
  padding: 0;
}

h1, h2 {
  text-align: center;
  color: #00ff99;
}

.container {
  max-width: 950px;
  margin: 20px auto;
  background: #fff;
  border-radius: 10px;
  border: 2px solid #00ff99;
  box-shadow: 0 0 10px #00ff99;
  padding: 20px;
}

table {
  width: 100%;
  border-collapse: collapse;
  margin-top: 10px;
}

table, th, td {
  border: 1px solid #00cc88;
}

th, td {
  padding: 8px;
  text-align: right;
}

label {
  display: block;
  margin-top: 10px;
  font-weight: bold;
}

input, textarea {
  width: 96%;
  padding: 6px;
  border-radius: 5px;
  border: 1px solid #00cc88;
  font-family: inherit;
  margin-top: 4px;
  color: #000;
}

textarea {
  min-height: 60px;
}

.btn {
  background: #00ff99;
  color: black;
  padding: 10px 14px;
  margin: 5px;
  border: none;
  border-radius: 5px;
  cursor: pointer;
  font-weight: bold;
}

.btn:hover {
  background: #00cc77;
}

.section {
  border: 2px solid #00cc88;
  border-radius: 8px;
  margin-top: 15px;
  padding: 10px;
  background: #f8fff8;
}

.output {
  border: 2px solid #00cc99;
  border-radius: 8px;
  margin-top: 15px;
  padding: 10px;
  background: #ffffff;
  color: #000000;
  display: none;
}

.output table {
  width: 100%;
  border-collapse: collapse;
}

.output table, .output th, .output td {
  border: 1px solid #00cc77;
}
.output th, .output td {
  padding: 6px;
}

.hidden {
  display: none;
}

@media (max-width:600px){
  .container {padding:10px}
  input,textarea {width:100%}
}
</style>
</head>
<body>

<div class="container">
  <h1>ğŸ›‹ Ø³ÛŒØ³ØªÙ… Ù…Ø¯ÛŒØ±ÛŒØª Ø³ÙØ§Ø±Ø´ Ù…Ø¨Ù„ Ùˆ ØµÙ†Ø¯Ù„ÛŒ</h1>

  <div id="form">
    <table>
      <tr>
        <td><label>Ù†Ø§Ù… Ù…Ø´ØªØ±ÛŒ</label><input id="customer"></td>
        <td><label>Ù…Ø¯Ù„</label><input id="model"></td>
        <td><label>ØªØ§Ø±ÛŒØ® ØªØ­ÙˆÛŒÙ„</label><input type="date" id="delDate"></td>
        <td><label>Ù‚ÛŒÙ…Øª</label><input id="price" type="number"></td>
      </tr>
    </table>

    <div class="section">
      <h3>Û±. Ø±Ù†Ú¯â€ŒÚ©Ø§Ø±ÛŒ</h3>
      <input placeholder="Ø±Ù†Ú¯ Ú©Ø§Ø±" id="paintColor">
      <input placeholder="Ù†ÙˆØ¹ Ù¾ÙˆØ´Ø´ ÛŒØ§ Ù„Ø§Ú©" id="paintFinish">
      <input placeholder="ØªØ¹Ø¯Ø§Ø¯ Ù‚Ø·Ø¹Ø§Øª" id="paintCount">
      <textarea placeholder="ØªÙˆØ¶ÛŒØ­Ø§Øª Ø±Ù†Ú¯â€ŒÚ©Ø§Ø±ÛŒ" id="paintNote"></textarea>
    </div>

    <div class="section">
      <h3>Û². Ø®ÛŒØ§Ø·ÛŒ</h3>
      <input placeholder="Ú©Ø¯ Ù¾Ø§Ø±Ú†Ù‡" id="fabCode">
      <input placeholder="Ø±Ù†Ú¯ Ù¾Ø§Ø±Ú†Ù‡" id="fabColor">
      <textarea placeholder="Ø´Ø±Ø­ ØªÙØµÛŒÙ„ÛŒ Ù¾Ø§Ø±Ú†Ù‡ØŒ Ú©ÙˆØ³Ù† Ùˆ Ù…ÙˆØ§Ø±Ø¯ Ø¯ÛŒÚ¯Ø±..." id="fabNote"></textarea>
    </div>

    <div class="section">
      <h3>Û³. Ù†Ø¬Ø§Ø±ÛŒ</h3>
      <input placeholder="Ù…Ø¯Ù„ Ù…Ø¨Ù„" id="carpModel">
      <textarea placeholder="ØªÙˆØ¶ÛŒØ­Ø§Øª Ú©Ø§Ø± Ù†Ø¬Ø§Ø±ÛŒ (Ù…Ø«Ù„Ø§Ù‹ Ù†ÙˆØ¹ Ø§ØªØµØ§Ù„ØŒ Ù¾Ø§ÛŒÙ‡ØŒ Ø³Ø§Ø®ØªØ§Ø±...)" id="carpNote"></textarea>
    </div>

    <div class="section">
      <h3>Û´. Ø±ÙˆÛŒâ€ŒÚ©ÙˆØ¨ÛŒ</h3>
      <textarea placeholder="ØªÙˆØ¶ÛŒØ­Ø§Øª Ø±ÙˆÛŒâ€ŒÚ©ÙˆØ¨ÛŒ (Ù†ÙˆØ¹ ÙÙˆÙ…ØŒ Ø§Ø¨Ø±ØŒ Ù¾Ø§Ø±Ú†Ù‡ Ø±ÙˆØ¨Ø§Ù†...)" id="upNote"></textarea>
    </div>

    <div class="section">
      <h3>Ûµ. ØªØ­ÙˆÛŒÙ„</h3>
      <textarea placeholder="Ø¢Ø¯Ø±Ø³ Ùˆ ØªÙˆØ¶ÛŒØ­Ø§Øª ØªØ­ÙˆÛŒÙ„" id="delNote"></textarea>
    </div>

    <button class="btn" onclick="saveOrder()">ğŸ’¾ Ø°Ø®ÛŒØ±Ù‡ Ø³ÙØ§Ø±Ø´</button>
    <button class="btn" onclick="toggleOrders()">ğŸ“‹ Ù†Ù…Ø§ÛŒØ´ Ø³ÙØ§Ø±Ø´â€ŒÙ‡Ø§</button>
  </div>

  <div id="orderList" class="section hidden"></div>
  <div id="output" class="output"></div>
</div>

<script>
let orders = JSON.parse(localStorage.getItem("orders") || "[]");

function saveOrder() {
  const order = {
    customer: val('customer'),
    model: val('model'),
    price: val('price'),
    delDate: val('delDate'),
    paintColor: val('paintColor'),
    paintFinish: val('paintFinish'),
    paintCount: val('paintCount'),
    paintNote: val('paintNote'),
    fabCode: val('fabCode'),
    fabColor: val('fabColor'),
    fabNote: val('fabNote'),
    carpModel: val('carpModel'),
    carpNote: val('carpNote'),
    upNote: val('upNote'),
    delNote: val('delNote')
  };
  orders.push(order);
  localStorage.setItem("orders", JSON.stringify(orders));
  clearForm();
  alert("âœ… Ø³ÙØ§Ø±Ø´ Ø°Ø®ÛŒØ±Ù‡ Ø´Ø¯");
}

function val(id){return document.getElementById(id).value.trim();}

function clearForm(){
  document.querySelectorAll('input, textarea').forEach(el => el.value = '');
}

function toggleOrders(){
  const listDiv = document.getElementById('orderList');
  listDiv.classList.toggle('hidden');
  renderOrders();
}

function renderOrders(){
  const listDiv = document.getElementById('orderList');
  if (orders.length === 0) {
    listDiv.innerHTML = "<p>Ù‡ÛŒÚ† Ø³ÙØ§Ø±Ø´ÛŒ Ø«Ø¨Øª Ù†Ø´Ø¯Ù‡ Ø§Ø³Øª.</p>";
    return;
  }
  listDiv.innerHTML = orders.map((o,i)=>`
  <div style="border:1px solid #00ff99;padding:8px;margin-bottom:8px;">
    <b>${o.customer}</b> | Ù…Ø¯Ù„: ${o.model} | ØªØ§Ø±ÛŒØ® ØªØ­ÙˆÛŒÙ„: ${o.delDate} | Ù‚ÛŒÙ…Øª: ${o.price} ØªÙˆÙ…Ø§Ù†<br>
    <div style="margin-top:6px;">
      <button class="btn" onclick="showSection(${i},'paint')">ğŸ¨ Ø±Ù†Ú¯â€ŒÚ©Ø§Ø±ÛŒ</button>
      <button class="btn" onclick="showSection(${i},'fab')">ğŸ§µ Ø®ÛŒØ§Ø·ÛŒ</button>
      <button class="btn" onclick="showSection(${i},'carp')">ğŸª“ Ù†Ø¬Ø§Ø±ÛŒ</button>
      <button class="btn" onclick="showSection(${i},'up')">ğŸ›  Ø±ÙˆÛŒâ€ŒÚ©ÙˆØ¨ÛŒ</button>
      <button class="btn" onclick="showSection(${i},'del')">ğŸšš ØªØ­ÙˆÛŒÙ„</button>
    </div>
  </div>`).join('');
}

function showSection(i,type){
  const o = orders[i];
  let html="";
  if(type==='paint') html=`
  <h3>Ø¨Ø±Ú¯Ù‡ Ø±Ù†Ú¯â€ŒÚ©Ø§Ø±ÛŒ</h3>
  <table>
  <tr><th>Ø±Ù†Ú¯</th><td>${o.paintColor}</td></tr>
  <tr><th>Ù¾ÙˆØ´Ø´</th><td>${o.paintFinish}</td></tr>
  <tr><th>ØªØ¹Ø¯Ø§Ø¯ Ù‚Ø·Ø¹Ø§Øª</th><td>${o.paintCount}</td></tr>
  <tr><th>ØªÙˆØ¶ÛŒØ­Ø§Øª</th><td>${o.paintNote}</td></tr>
  </table>`;

  if(type==='fab') html=`
  <h3>Ø¨Ø±Ú¯Ù‡ Ø®ÛŒØ§Ø·ÛŒ</h3>
  <table>
  <tr><th>Ú©Ø¯ Ù¾Ø§Ø±Ú†Ù‡</th><td>${o.fabCode}</td></tr>
  <tr><th>Ø±Ù†Ú¯ Ù¾Ø§Ø±Ú†Ù‡</th><td>${o.fabColor}</td></tr>
  <tr><th>ØªÙˆØ¶ÛŒØ­Ø§Øª</th><td>${o.fabNote}</td></tr>
  </table>`;

  if(type==='carp') html=`
  <h3>Ø¨Ø±Ú¯Ù‡ Ù†Ø¬Ø§Ø±ÛŒ</h3>
  <table>
  <tr><th>Ù…Ø¯Ù„</th><td>${o.carpModel}</td></tr>
  <tr><th>ØªÙˆØ¶ÛŒØ­Ø§Øª</th><td>${o.carpNote}</td></tr>
  </table>`;

  if(type==='up') html=`
  <h3>Ø¨Ø±Ú¯Ù‡ Ø±ÙˆÛŒâ€ŒÚ©ÙˆØ¨ÛŒ</h3>
  <table>
  <tr><th>ØªÙˆØ¶ÛŒØ­Ø§Øª</th><td>${o.upNote}</td></tr>
  </table>`;

  if(type==='del') html=`
  <h3>Ø¨Ø±Ú¯Ù‡ ØªØ­ÙˆÛŒÙ„</h3>
  <table>
  <tr><th>Ù…Ø´ØªØ±ÛŒ</th><td>${o.customer}</td></tr>
  <tr><th>Ù…Ø¯Ù„</th><td>${o.model}</td></tr>
  <tr><th>ØªØ§Ø±ÛŒØ® ØªØ­ÙˆÛŒÙ„</th><td>${o.delDate}</td></tr>
  <tr><th>Ø¢Ø¯Ø±Ø³/ØªÙˆØ¶ÛŒØ­Ø§Øª</th><td>${o.delNote}</td></tr>
  </table>`;

  const out=document.getElementById('output');
  out.innerHTML=`
  <h2>${o.customer} | Ù…Ø¯Ù„ ${o.model}</h2>${html}
  <div style="text-align:center;margin-top:8px;">
    <button class='btn' onclick='window.print()'>ğŸ–¨ Ú†Ø§Ù¾</button>
    <button class='btn' onclick='sendWhatsApp(${i},"${type}")'>ğŸ“¤ Ø§Ø±Ø³Ø§Ù„ ÙˆØ§ØªØ³Ø§Ù¾</button>
  </div>`;
  out.style.display='block';
  window.scrollTo(0,document.body.scrollHeight);
}

function sendWhatsApp(i,type){
  const o=orders[i];
  const msg=encodeURIComponent(`Ø¨Ø±Ú¯Ù‡ ${type} | Ù…Ø´ØªØ±ÛŒ: ${o.customer} | Ù…Ø¯Ù„: ${o.model}`);
  window.open(`https://wa.me/?text=${msg}`,'_blank');
}
</script>
</body>
</html>
