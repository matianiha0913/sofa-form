<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>مدیریت سفارش مبل و صندلی</title>
  <style>
    @font-face {
      font-family: 'IranSans';
      src: local('IranSans'), url('fonts/IRANSans.ttf') format('truetype');
    }

    body {
      font-family: 'IranSans', Tahoma, sans-serif;
      background-color: #0b0b0b;
      color: #d0ffd0;
      margin: 0;
      padding: 0;
    }

    h1, h2 {
      text-align: center;
      color: #00ff99;
    }

    .container {
      max-width: 900px;
      margin: 20px auto;
      background: #111;
      border-radius: 10px;
      padding: 20px;
      box-shadow: 0 0 15px #033;
    }

    label {
      display: block;
      margin-top: 10px;
      color: #b8ffb8;
    }

    input, textarea {
      width: 100%;
      padding: 6px;
      border-radius: 6px;
      border: 1px solid #066;
      background: #191919;
      color: #b8ffb8;
      font-family: inherit;
    }

    textarea {
      min-height: 60px;
    }

    .btn {
      background: #00ff99;
      color: black;
      padding: 8px 12px;
      margin: 5px;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      font-weight: bold;
    }

    .btn:hover {
      background: #00cc77;
    }

    .list {
      margin-top: 20px;
      background: #141414;
      padding: 10px;
      border-radius: 10px;
    }

    .order-item {
      padding: 8px;
      border-bottom: 1px solid #033;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .order-item div {
      flex-grow: 1;
    }

    .section {
      margin-top: 10px;
    }

    .output {
      background: #111;
      border-radius: 10px;
      padding: 20px;
      margin-top: 20px;
      display: none;
      color: #b8ffb8;
    }

    .output h3 {
      color: #00ff99;
      border-bottom: 1px solid #044;
      padding-bottom: 5px;
    }

    @media (max-width: 600px) {
      .container {
        padding: 10px;
        margin: 5px;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>📋 سیستم مدیریت سفارش مبل و صندلی</h1>

    <h2>افزودن سفارش جدید</h2>
    <div id="form">
      <label>نام مشتری:</label><input id="customer">
      <label>شماره سفارش:</label><input id="orderId">
      <label>توضیحات کلی:</label><textarea id="note"></textarea>

      <h3>۱. چوب‌کاری</h3>
      <input placeholder="رنگ چوب" id="woodColor">
      <input placeholder="نوع پوشش" id="woodFinish">
      <input placeholder="تعداد قطعات چوبی" id="woodCount">
      <input placeholder="آیتم خالی 1" id="woodEx1">
      <input placeholder="آیتم خالی 2" id="woodEx2">

      <h3>۲. خیاطی</h3>
      <input placeholder="کد پارچه" id="fabCode">
      <input placeholder="رنگ پارچه" id="fabColor">
      <input placeholder="تعداد صندلی" id="fabChair">
      <input placeholder="تعداد مبل" id="fabSofa">

      <h3>۳. نجاری</h3>
      <input placeholder="مدل مبل" id="carpModel">
      <input placeholder="تعداد مبل‌ها" id="carpCount">
      <input placeholder="آیتم خالی 1" id="carp1">
      <input placeholder="آیتم خالی 2" id="carp2">

      <h3>۴. روی‌کوبی</h3>
      <input placeholder="مدل مبل" id="upModel">
      <input placeholder="میز کنار مبل" id="upTable">
      <input placeholder="پایه" id="upBase">
      <input placeholder="مبل" id="upSofa">

      <h3>۵. برگه تحویل</h3>
      <input placeholder="تاریخ تحویل" id="delDate" type="date">
      <textarea placeholder="آدرس و توضیحات تحویل" id="delAddress"></textarea>

      <button class="btn" onclick="saveOrder()">ذخیره سفارش</button>
    </div>

    <h2>📦 لیست سفارش‌ها</h2>
    <div id="orderList" class="list"></div>

    <div id="output" class="output"></div>
  </div>

  <script>
    let orders = JSON.parse(localStorage.getItem("orders") || "[]");
    const orderList = document.getElementById('orderList');
    const outputBox = document.getElementById('output');

    function saveOrder() {
      const order = {
        id: document.getElementById("orderId").value,
        customer: document.getElementById("customer").value,
        note: document.getElementById("note").value,
        woodColor: document.getElementById("woodColor").value,
        woodFinish: document.getElementById("woodFinish").value,
        woodCount: document.getElementById("woodCount").value,
        fabCode: document.getElementById("fabCode").value,
        fabColor: document.getElementById("fabColor").value,
        fabChair: document.getElementById("fabChair").value,
        fabSofa: document.getElementById("fabSofa").value,
        carpModel: document.getElementById("carpModel").value,
        carpCount: document.getElementById("carpCount").value,
        upModel: document.getElementById("upModel").value,
        upTable: document.getElementById("upTable").value,
        upBase: document.getElementById("upBase").value,
        upSofa: document.getElementById("upSofa").value,
        delDate: document.getElementById("delDate").value,
        delAddress: document.getElementById("delAddress").value
      };
      orders.push(order);
      localStorage.setItem("orders", JSON.stringify(orders));
      renderOrders();
      alert("✅ سفارش ذخیره شد");
    }

    function renderOrders() {
      orderList.innerHTML = '';
      orders.forEach((o, i) => {
        const div = document.createElement("div");
        div.className = "order-item";
        div.innerHTML = `
          <div><strong>${o.customer}</strong> | شماره: ${o.id}</div>
          <div>
            <button class="btn" onclick="showSection(${i}, 'wood')">چوب</button>
            <button class="btn" onclick="showSection(${i}, 'fab')">خیاطی</button>
            <button class="btn" onclick="showSection(${i}, 'carp')">نجاری</button>
            <button class="btn" onclick="showSection(${i}, 'up')">روی‌کوبی</button>
            <button class="btn" onclick="showSection(${i}, 'del')">تحویل</button>
          </div>`;
        orderList.appendChild(div);
      });
    }

    function showSection(i, type) {
      const o = orders[i];
      let html = '';

      if (type === 'wood') html = `
        <h3>برگه چوب‌کاری</h3>
        <p>رنگ: ${o.woodColor}</p>
        <p>پوشش: ${o.woodFinish}</p>
        <p>تعداد: ${o.woodCount}</p>
        <p>یادداشت: ${o.note}</p>`;

      if (type === 'fab') html = `
        <h3>برگه خیاطی</h3>
        <p>کد پارچه: ${o.fabCode}</p>
        <p>رنگ پارچه: ${o.fabColor}</p>
        <p>تعداد صندلی: ${o.fabChair}</p>
        <p>تعداد مبل: ${o.fabSofa}</p>`;

      if (type === 'carp') html = `
        <h3>برگه نجاری</h3>
        <p>مدل: ${o.carpModel}</p>
        <p>تعداد مبل‌ها: ${o.carpCount}</p>`;

      if (type === 'up') html = `
        <h3>برگه روی‌کوبی</h3>
        <p>مدل: ${o.upModel}</p>
        <p>میز کنار مبل: ${o.upTable}</p>
        <p>پایه: ${o.upBase}</p>
        <p>مبل: ${o.upSofa}</p>`;

      if (type === 'del') html = `
        <h3>برگه تحویل</h3>
        <p>مشتری: ${o.customer}</p>
        <p>تاریخ تحویل: ${o.delDate}</p>
        <p>آدرس: ${o.delAddress}</p>`;

      outputBox.innerHTML = html + `
        <div style="text-align:center;margin-top:10px;">
          <button class='btn' onclick='window.print()'>🖨 چاپ</button>
          <button class='btn' onclick='sendWhatsApp(${i},"${type}")'>📤 ارسال واتساپ</button>
        </div>`;
      outputBox.style.display = 'block';
      window.scrollTo(0, document.body.scrollHeight);
    }

    function sendWhatsApp(i, type) {
      const o = orders[i];
      const msg = encodeURIComponent(`برگه ${type} برای سفارش ${o.customer}\nکد: ${o.id}`);
      window.open(`https://wa.me/?text=${msg}`, "_blank");
    }

    renderOrders();
  </script>
</body>
</html>
